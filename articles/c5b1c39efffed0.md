---
title: "大型プロジェクト経験したメモ"
emoji: "📚"
type: "tech"
topics: []
published: false
hugo_draft: true
hugo_date: "2022-05-16T00:01:00+09:00"
---

# 見積もりの難しさと改善案

大型プロジェクトでは要件を完全に把握することは困難。詳細に仕様を詰めたとしてもかならずズレが生じる。それはユースケースの見落としかもしれないし、データベース設計上の性能的な課題かもしれない。

要件が不明瞭な状態で、画面設計・内部設計を始めると困惑して足が止まりやすい。だからといって、すべての要件をもらさず詳細化するのも良くない。時間がかかりすぎるし、将来に渡ってその要件がありつづけるとは限らない。調査していくと要件が満たせないことがわかり、見直しを強いられることがある。

既存の複雑な機能を改修する場合には、単なる技術調査では作業時間が全く予想できない。なぜなら、変更がどのように波及するかわからないため。コードを書かずに調査だけして見積もりを立てるのは難しい。

コードを書かないで調査するよりも、とりあえず手を動かしてみて、コードが変化した場合のフィードバックを得たほうが理解が進むこともある。プロダクトコードを意識しないでプロトタイプを作ってみる、というアプローチはどうか。

予想外をへらすためにはとにかくスコープを狭めることが良いと考える。すべての機能や要件を事前に洗い出して順次実装していくのではなく、必要な機能だけを持ったプログラムを作り、デプロイする。それを拡張していく。そのように考えるのが良いように思う。

# 開発の難しさと改善案

プロジェクトが長く大規模になると git の作業ブランチが頻繁にコンフリクトする。特に、すでに運用が始まっているサービスの場合は、リリースブランチと、開発ブランチの2つが存在することになりコンフリクトしやすい。コンフリクトの解消は大きな負担になる。これを避けるために、開発ブランチの機能を非公開にしてリリースブランチにマージしていくのはどうか。

大型プロジェクトでは難易度が高く、全体に影響のあるような課題にぶつかることもある。本当に複雑な問題は、多くの場合トレードオフであり、何かを選択することで、何かを諦めなければならない。このような判断をする心理的負担は大きい。自分が下した判断が正しかったかどうか苛まれることになる。この苦しみを避けるためには、人を巻き込むということが必要なのだろう。

外部システムとの連携は特に注意が必要なポイントとなる。外部システムについて十分理解していない状態では全く話は進まないので、十分知識を得る必要がある。また、自分の属していないチームに作業を依頼してもらう必要があるとき、その仕事が迅速に進むことはまずない。依頼が的外れかもしれない。どうあるべきか、という話し合いの場を設けるのは、早すぎるくらいが良いのではないか。

# リリース

リリースに際しては予め手順書を作っておき、リハーサルする。本番では台本通りに作業するだけで、何か考えたり判断したり必要がないようにする。また、台本にはなにかトラブルが起きた時に連絡したり相談したりする相手を決めておく。リリースを取りやめる可能性についても考えておく。

リリースが終わったあと、これまで使われたことのない機能が利用され、不具合や問い合わせが津波のように押し寄せてくる。ここの問い合わせを誰にアサインするかを決める司令塔がいると便利かもしれない。たとえバグがあったとしても、高速にリリースするほど問い合わせは減るので、修正、CI、レビュー、デプロイが高速に行われるような体制を整えておく。
